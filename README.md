# Документация к программе "State.io Clone"

## Общее описание
Это клон популярной браузерной стратегии State.io с элементами реального времени. Игрок управляет базами (узлами), захватывает территории противника, развивает экономику и прокачивает характеристики. Проект реализован на Python с использованием библиотеки PyGame.

## Особенности
- Система уровней с возрастающей сложностью
- Магазин с улучшениями характеристик
- 3 типа вражеских баз с разным поведением
- Динамическая генерация войск
- Система перемещения юнитов между базами
- Фоновая музыка и звуковые эффекты
- ИИ противника

## Требования
- Python 3.7+
- PyGame 2.0+
- Файлы ресурсов (спрайты, звуки) в соответствующих директориях

## Структура проекта
```
/main.py
/levels.py
/sprites/
  /blue_castle.png
  /red_castle.png
  /green_castle.png
  /yellow_castle.png
  /neutral_castle.png
/sounds/
  /menu_music.mp3
  /shop_music.mp3
  /level_music.mp3
  /victory_sound.mp3
  /defeat_sound.mp3
```

## Управление
- **ЛКМ** - выбор баз и отправка войск
- **M** - открыть магазин
- **B** - вернуться в главное меню
- **ESC** - выход из игры

## Основные механизмы

### 1. Система узлов (баз)
- Каждая база имеет:
  - Владельца (игрок/враг/нейтрал)
  - Количество войск (автоматически увеличивается)
  - Радиус влияния
  - Соседние узлы для атак

### 2. Боевая система
- Для атаки: выберите свою базу → выберите цель
- На вражескую базу отправляется 50% войск
- При столкновении отрядов происходит сражение:
  - Если владелец одинаковый - войска суммируются
  - Если разные - вычитаются из защиты цели

### 3. Экономика
- Монеты выдаются за прохождение уровней
- Используются для улучшений в магазине:
  - **Увеличение стартовых войск** (+N за уровень)
  - **Ускорение генерации** (-0.1s за уровень)

### 4. ИИ противника
- Атакует каждые 3 секунды
- Выбирает наиболее слабую соседнюю базу
- Отправляет 50% своих войск при атаке

## Классы и функции

### Основные классы
1. **Node** - представляет базу:
   - `update_troops()` - логика генерации войск
   - `draw()` - отрисовка базы
   - `start_movement()` - инициирует перемещение

2. **TroopMovement** - управление движением отрядов:
   - `update()` - перемещение к цели
   - `draw()` - отрисовка движущихся войск

### Важные функции
- `create_nodes()` - генерация уровня из конфига
- `ai_turn()` - логика ИИ для вражеских баз
- `check_victory()/check_defeat()` - проверка условий победы

## Система уровней
Уровни задаются в файле `levels.py` с параметрами:
- Расположение баз
- Стартовое количество войск
- Интервалы спавна войск:
  - `player_growth_interval` - для игрока
  - `enemy_growth_interval` - для врагов
- Музыкальное сопровождение на лвл
- Задний фон

Пример конфигурации уровня:
```python
{
    "name": "Уровень 1",
    "background": "backgrounds/level1_bg.jpg",
    "music": "sounds/level1_music.mp3",
    "nodes": [
        {"x": 200, "y": 300, "owner": 1, "troops": 20},
        {"x": 600, "y": 300, "owner": 2, "troops": 15}
    ]
}
```

## Магазин улучшений
Доступные улучшения:
1. **Увеличение войск**:
   - Стоимость: 10 + 10*уровень
   - Эффект: +5 к стартовым войскам за уровень

2. **Ускорение роста**:
   - Стоимость: 15 + 15*уровень
   - Эффект: -0.1s к интервалу генерации за уровень

## Музыка и звуки
- Разные треки для меню, магазина и уровней
- Звуковые эффекты победы/поражения
- Громкость музыки регулируется (по умолчанию 5%)

## Требования к ресурсам
- Изображения баз: 50x50px PNG с прозрачностью
- Фоновые изображения: 800x600px JPG/PNG
- Аудиофайлы: MP3 44100Hz

## Сборка и запуск
1. Установите зависимости:
```bash
pip install pygame
```

2. Запустите игру:
```bash
python main.py
```

## Архитектура
1. Главное меню → Выбор уровня
2. Игровой процесс → Магазин (по необходимости)
3. Цикл победа/поражение → Возврат в меню

Программа использует событийно-ориентированную модель PyGame с фиксированным FPS (60 кадров/сек).
 
